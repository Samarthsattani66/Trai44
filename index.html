<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <title>TEAMROHITOFFICAL45_LIVE</title>

  <!-- Plyr & HLS -->
  <link href="https://cdn.jsdelivr.net/npm/plyr@3.6.2/dist/plyr.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/plyr@3.6.12/dist/plyr.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.1.4/dist/hls.min.js"></script>

  <style>
    body {margin:0;background:#000;color:#fff;font-family:Poppins,sans-serif;}
    .loading {position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:9999;}
    .loading-text {position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;text-align:center;height:100px;line-height:100px;}
    .loading-text span {display:inline-block;margin:0 5px;color:#00b3ff;font-family:'Quattrocento Sans',sans-serif;}
    .iframe-wrapper {position:relative;padding-top:56.25%;height:0;overflow:hidden;}
    .iframe-wrapper iframe {position:absolute;top:0;left:0;width:100%;height:100%;border:none;}
    video {width:100%;background:#000;display:none;}
    .watermark {position:absolute;bottom:2px;right:2px;font-size:10px;color:rgba(255,255,255,0.3);pointer-events:none;font-family:"Courier New",monospace;}
  </style>
</head>
<body>

<div class="loading" id="loading">
  <div class="loading-text">
    <span>T</span><span>E</span><span>A</span><span>M</span>
    <span>R</span><span>O</span><span>H</span><span>I</span><span>T</span>
    <span>O</span><span>F</span><span>F</span><span>I</span><span>C</span>
    <span>I</span><span>A</span><span>L</span><span>4</span><span>5</span>
  </div>
</div>

<div style="position:relative;width:100%;height:auto;">
  <video id="player" controls autoplay playsinline>
    <source id="m3u8-url" src="" type="application/x-mpegURL">
  </video>

  <div class="iframe-wrapper" id="iframe-wrapper" style="display:none;">
    <iframe id="iframe-player" allowfullscreen></iframe>
  </div>

  <div class="watermark">TEAMROHITOFFICAL45</div>
</div>

<script>
  const urlParams = new URLSearchParams(window.location.search);
  let streamUrl = urlParams.get("id");

  // Hide loading after 1 sec
  setTimeout(()=>{document.getElementById("loading").style.display="none";},1000);

  if(streamUrl){
    // decode twice (handles both raw & encoded URLs)
    try {streamUrl = decodeURIComponent(decodeURIComponent(streamUrl));} catch(e){}

    const videoEl = document.getElementById("player");
    const sourceEl = document.getElementById("m3u8-url");
    const iframeEl = document.getElementById("iframe-player");
    const iframeWrapper = document.getElementById("iframe-wrapper");

    if(streamUrl.endsWith(".m3u8")){
      sourceEl.src = streamUrl;
      videoEl.style.display="block";

      if(Hls.isSupported()){
        const hls = new Hls();
        hls.loadSource(streamUrl);
        hls.attachMedia(videoEl);
        hls.on(Hls.Events.MANIFEST_PARSED,()=>{new Plyr(videoEl);});
      } else {
        new Plyr(videoEl);
      }
    } else {
      iframeEl.src = streamUrl;
      iframeWrapper.style.display="block";
    }
  } else {
    document.body.innerHTML="<h3 style='text-align:center;color:red;'>âš  No stream URL provided!</h3>";
  }
</script>

</body>
</html>
